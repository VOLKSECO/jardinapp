// Objet contenant les traductions pour chaque langue
const translations = {
  fr: {
    tabs: {
      locations: 'Terre',
      seeds: 'Graines',
      cultures: 'Cultures',
      harvests: 'Récoltes',
      bilan: 'Bilan'
    },
    buttons: {
      theme: 'Changer de thème',
      add: 'Ajouter',
      add_location: '+',
      edit_location: 'Modifier un lieu',
      add_culture: '+',
      add_seed: '+',
      add_harvest:'+',
      edit_seed: 'Modifier une graine',
      save: 'Enregistrer',
      delete: 'Supprimer',
      edit_culture: 'Modifier la culture',
      generate_report: 'Générer le rapport',
      reset_filters: 'Réinitialiser',
      upload_image: 'Choisir une image',
    },
    filters: {
      location_type: 'Type de lieu',
      seed_type: 'Type de graine',
      seed_category: 'Catégorie de graine',
      seed_species: 'Espèce de graine',
      seed_common_name: 'Nom commun de graine',
      seed_scientific_name: 'Nom scientifique de graine',
      seed_sowing_months: 'Mois de semis de graine',
      filter_culture_address : 'Adresse de culture',
      filter_category:'Catégorie',
      filter_harvest_month : 'Mois des récolte',    
      filter_plant_type: 'Type de plante',
      unit: 'Unité',
      category: 'Catégorie',
      culture_address: 'Adresse de culture',
      culture_name: 'Nom de culture',
      culture_type: 'Type de culture',
      harvest_month: 'Mois de récolte',
    },
    fields: {
      in : 'en',
      cyclique: 'Cyclique',
      location: 'Lieu',
      seed: 'Graine',
      statique: 'Statique',
      name: 'Nom',
      address: 'Adresse',
      type: 'Type',
      surface: 'Surface (m²)',
      image: 'Image',
      remarks: 'Remarques',
      common_name: 'Nom commun',
      category: 'Catégorie',
      species: 'Espèce',
      scientific_name: 'Nom scientifique',
      sowing_months: 'Mois de semis',
      harvest_months: 'Mois de récolte',
      germination_time: 'Temps de germination (jours)',
      harvest_time: 'Temps pour récolte (semaines)',
      seed_type: 'Type de plante',
      location: 'Terre',
      quantity: 'Quantité',
      planting_date: 'Date de plantation',
      first_harvest_time : 'Temps avant première récolte (semaines)',
      harvest_date: 'Date de récolte',
      harvest_periodicity: 'Périodicité de récolte (semaines)',
      harvest_quantity: 'Quantité récoltée en fin de période',
      harvest_type: 'Type de récolte',
      total_quantity: 'Quantité totale',
      plant: 'Plante',
      dans: 'en',
      parcelle: "Parcelle",
      pot: "Pot",
      caissette: "Caissette",
      surface: "Surface",
      location_image: "Image du lieu",
      culture: 'Culture',
    },
    labels: {
  between: 'Entre',
  and: 'et'
},
units: {
  kg: 'kg',
  pieces : 'pièces',
  days: 'jours',
  weeks: 'semaines'
},
    hints: {
      sowing_dates: 'Dates de semis',
    },  
    categories: {
      aromatiques: 'Aromatiques',
      légumes: 'Légumes',
      tubercules: 'Tubercules',
      fruitières: 'Fruitières',
      médicinales: 'Médicinales',
      sauvages: 'Sauvages',
      plantes_aromatiques: 'Plantes aromatiques',
      plantes_fruitières: 'Plantes fruitières',
      plantes_médicinales: 'Plantes médicinales',
      plantes_sauvages: 'Plantes sauvages',
    },
    placeholders: {
      select_harvest_count: 'Nombre de récoltes',
      select_harvest_month: 'Mois de récolte',
      surface: 'Surface (m²)',
      search: 'Rechercher',
      common_name: 'Nom commun',
      scientific_name: 'Nom scientifique',
      select_sowing_month: 'Mois de semis',
      select_seed_harvest_months: 'Mois de récolte',
      select_seed_germination_time: 'SélectTemps de germination (jours)',
      select: 'Sélectionner',
      select_category: 'Catégorie',
      select_species: 'Espèce',
      select_type: 'Type',
      select_address: 'Adresses',
      select_months: 'Mois sélectionnés',
      select: 'Sélectionner',
      select_category: 'Catégorie',
      select_species: 'Espèce',
      select_range: 'Sélectionner une plage',
      select_location: 'Lieu',
      select_plant: 'Plante',
      select_harvest_type: 'Type de récolte',
      select_harvest_periodicity: 'Périodicité de la récolte',
      select_harvest_quantity: 'Quantité récoltée en moyenne',
      select_harvest_date: 'Date de récolte',
      select_first_harvest_time: 'Temps pour la première récolte',
      select_planting_date: 'Date de plantation',
      select_location: 'Lieu',
      select_seed: 'Graine',
      select_culture: 'Culture',
      select_harvest: 'Récolte',
      select_location_type: 'Type de lieu',
      select_seed_type: 'Type de graine',
      select_seed_category: 'Catégorie',
      select_seed_species: 'Espèce',
      select_seed_common_name: 'Nom commun',
      select_seed_scientific_name: 'Nom scientifique',
      select_seed_sowing_months: 'Mois de semis',
      select_seed_germination_time: 'Temps de germination',
      select_seed_harvest_time: 'Temps pour la récolte',
      select_seed_image: 'Image de graine',
      select_seed_remarks: 'Remarques sur la plante',
      select_location_name: 'Nom de lieu',
      select_location_address: 'Adresse de lieu',
      filter_culture_address : 'Addresse',
      filter_category:'Catégorie',
      filter_harvest_month : 'Mois des récolte',
      filter_plant_type: 'Type de plante',
      filter_seed_type: 'Type de graine',
      filter_seed_category: 'Catégorie',
      filter_plant_address: 'Adresse de culture',
      name: 'Nom',
      quantity: 'Quantité',
      address: 'Adresse',
      first_harvest_time: 'Temps avant première récolte',
      harvest_periodicity: 'Périodicité de récolte',
      harvest_quantity: 'Quantité récoltée en moyenne',
      total_quantity: 'Quantité totale',
      remarks: 'Remarques',
    },
    help: {
      locations: 'Ajoutez des lieux pour organiser vos cultures.',
      seeds: 'Gérez votre stock de graines et plantes.',
      cultures : 'Créez et gérez vos cultures en associant des graines à des lieux.',
      harvests: 'Enregistrez vos récoltes pour suivre la production.',
      bilan: 'Générez un rapport de vos récoltes et cultures.',
    },
  errors: {
  required: 'Veuillez remplir tous les champs obligatoires.',
  invalid_number: 'Veuillez entrer un nombre valide.',
  location_in_use: 'Ce lieu est utilisé dans une ou plusieurs cultures.',
  delete_failed: 'Échec de la suppression du lieu.',
  invalid_id: 'Identifiant du lieu invalide.',
  not_found: 'Lieu non trouvé.',
  species_load_failed: 'Échec du chargement des catégories et espèces.',
  invalid_range: 'La valeur minimale ne peut pas être supérieure à la maximale',
  init_failed: 'Échec de l\'initialisation',
  save_failed: 'Échec de la sauvegarde',
  upload_failed: 'Échec de l\'upload de l\'image',
  location_in_use: 'Ce lieu est utilisé dans une ou plusieurs cultures.',
  delete_failed: 'Échec de la suppression du lieu.',
  invalid_id: 'Identifiant du lieu invalide.',
  not_found: 'Lieu non trouvé.'
},
report: {
  title: 'Analyse de maraîchage',
  harvest: 'Récolte',
  plant_data: 'Données de la plante',
  culture_data: 'Données de la culture',
  harvest_data: 'Données de la récolte',
  analysis: 'Analyse',
  quantity_difference: 'Écart de quantité',
  delay_difference: 'Écart de délai',
  excess: 'excédent',
  deficit: 'déficit',
  na: 'N/A',
  delay: 'retard',
  quantity: 'quantité',
  advance: 'avance',
  total_quantity: 'quantité totale',
  no_seed_data: 'Aucune donnée de plante disponible',
  no_culture_data: 'Aucune donnée de culture disponible',
  no_harvests: 'Aucune récolte disponible',
  no_harvest_data: 'Aucune donnée de récolte disponible',
  no_data: 'Aucune donnée disponible',
  no_analysis: 'Aucune analyse disponible',
  no_plant_data: 'Aucune donnée de plante disponible',
  no_culture_data: 'Aucune donnée de culture disponible',
  no_harvest_data: 'Aucune donnée de récolte disponible',    
},
warnings: {
  delete_location: 'Voulez-vous vraiment supprimer ce lieu ?',
  force_delete_location: 'Ce lieu est lié à une ou plusieurs cultures. Supprimer ce lieu peut affecter les cultures et les récoltes associées. Voulez-vous forcer la suppression ?',
  delete_seed: 'Les cultures et récoltes dépendantes de cette plante seront en défaut. Voulez-vous supprimer cette graine ?',
  delete_culture: 'Cette culture est liée à des récoltes. La supprimer peut affecter les récoltes associées. Voulez-vous forcer la suppression ?',
  harvest_proximity: 'La date de récolte est proche ou dépassée. Êtes-vous sûr de vouloir garder cette culture ?'

},
    months: {
      January: 'Janvier',
      February: 'Février',
      March: 'Mars',
      April: 'Avril',
      May: 'Mai',
      June: 'Juin',
      July: 'Juillet',
      August: 'Août',
      September: 'Septembre',
      October: 'Octobre',
      November: 'Novembre',
      December: 'Décembre',
      Janvier: 'Janvier',
      Février: 'Février',
      Mars: 'Mars',
      Avril: 'Avril',
      Mai: 'Mai',
      Juin: 'Juin',
      Juillet: 'Juillet',
      Août: 'Août',
      Septembre: 'Septembre',
      Octobre: 'Octobre',
      Novembre: 'Novembre',
      Décembre: 'Décembre',
      janvier: 'Janvier',
      février: 'Février',
      mars: 'Mars',
      avril: 'Avril',
      mai: 'Mai',
      juin: 'Juin',
      juillet: 'Juillet',
      août: 'Août',
      septembre: 'Septembre',
      octobre: 'Octobre',
      novembre: 'Novembre',
      décembre: 'Décembre'
    }
  },
  en: {
    tabs: {
      locations: 'Locations',
      seeds: 'Seeds',
      cultures: 'Crops',
      harvests: 'Harvests',
      bilan: 'Report'
    },
    buttons: {
      theme: 'Toggle theme',
      add: 'Add',
      add_location: '+',
      edit_location: 'Edit a location',
      add_seed: '+',
      edit_seed: 'Edit a seed',
      save: 'Save',
      delete: 'Delete',
      add_culture: '+',
      edit_culture: 'Edit a crop',
      add_harvest: '+',
      edit_harvest: 'Edit a harvest',
      generateReport: 'Generate Report'
    },
    fields: {
      in: 'in',
      surface: 'Surface (m2)',
      cyclique: 'Cyclic',
      location: 'Location',
      statique: 'Static',
      name: 'Name',
      quantity: 'Quantity',
      planting_date: 'Planting date',
      first_harvest_time: 'Time to first harvest (weeks)',
      harvest_date: 'Harvest date',
      harvest_periodicity: 'Harvest periodicity (weeks)',
      harvest_quantity: 'Harvest quantity at end of period',
      harvest_type: 'Harvest type',
      total_quantity: 'Total quantity',
      plant: 'Plant',
      location: 'Locations',
      seed: 'Seed',
      dans: 'in',
      address: 'Address',
      type: 'Type',
      surface: 'Surface (m²)',
      image: 'Image',
      remarks: 'Remarks',
      common_name: 'Common name',
      category: 'Category',
      species: 'Species',
      scientific_name: 'Scientific name',
      sowing_months: 'Sowing months',
      harvest_months: 'Harvest months',
      germination_time: 'Germination time (days)',
      harvest_time: 'Harvest time (weeks)',
      seed_type: 'Plant type',
      dans: 'in',
      parcelle: 'Plot', 
      pot: 'Pot', 
      caissette: 'Tray',
      dans: 'in',
      culture: 'Crop',
    },
    hints :{
      sowing_dates: 'Sowing dates',
    },
    categories: {
      aromatiques: 'Aromatic',
      légumes: 'Vegetables',
      fruitières: 'Fruits',
      tubercules: 'Tubers',
      médicinales: 'Medicinal',
      sauvages: 'Wild',
      plantes_aromatiques: 'Aromatic plants',
      plantes_fruitières: 'Fruit plants',
      plantes_médicinales: 'Medicinal plants',
      plantes_sauvages: 'Wild plants',
    },    
    placeholders: {
      select_seed_harvest_time: 'Select harvest time',
      select_seed_germination_time: 'Select germination time (days)',
      select_sowing_month: 'Select sowing months',
      select_seed_harvest_months: 'Select harvest months',
      select_harvest_count: 'Harvest count',
      select_harvest_month: 'Harvest month',
      surface: 'Surface (m²)',
      search: 'Search',
      select: 'Select',
      select_category: 'Select a category',
      select_species: 'Select a species',
      select_type: 'All types',
      select_address: 'All addresses',
      select_months: 'Selected months',
      name: 'Name',
      quantity: 'Quantity',
      address: 'Address',
      first_harvest_time: 'Time to first harvest (weeks)',
      harvest_periodicity: 'Harvest periodicity (weeks)',
      remarks: 'Remarks',
      filter_plant_address: 'Filter by address',
      filter_category: 'Filter by category',
      filter_harvest_month: 'Filter by harvest month',
      filter_plant_type: 'Filter by plant type',
      filter_seed_type: 'Filter by seed type',
      filter_seed_category: 'Filter by seed category',
      filter_seed_species: 'Filter by seed species',
      filter_seed_common_name: 'Filter by common seed name',
      filter_seed_scientific_name: 'Filter by scientific seed name',
      filter_seed_sowing_months: 'Filter by sowing months',
      select_location: 'Select a location',
      select_seed: 'Select a seed',
      select_culture: 'Select a crop',
      select_harvest: 'Select a harvest',
      select_location_type: 'Select a location type',
      select_seed_type: 'Select a seed type',
      select_plant: 'Select a plant',
      select_range: 'Select a range',
      common_name: 'Select a common name',
      scientific_name: 'Select a scientific name',
    },
    help: {
      locations: 'Add and manage your growing locations (plots, pots, trays).',
      seeds: 'Manage your stock of seeds and plants.',
      cultures: 'Add and manage your crops.',
      harvests: 'Add and manage your harvests.',
      bilan: 'Generate reports on your harvests and crops.',
    },
    errors: {
      required: 'Please fill in all required fields.',
      invalid_number: 'Please enter a valid number.'
    },
    warnings: {
      delete_seed: 'Crops and harvests dependent on this plant will be invalid. Do you want to delete this seed?'
    },
    errors: {
  location_in_use: 'This location is used in one or more cultures.',
  delete_failed: 'Failed to delete the location.',
  invalid_id: 'Invalid location identifier.',
  not_found: 'Location not found.'
},
warnings: {
  delete_location: 'Do you really want to delete this location?',
  force_delete_location: 'This location is linked to one or more cultures. Deleting it may affect associated cultures and harvests. Do you want to force deletion?'
},
    months: {
      January: 'January',
      February: 'February',
      March: 'March',
      April: 'April',
      May: 'May',
      June: 'June',
      July: 'July',
      August: 'August',
      September: 'September',
      October: 'October',
      November: 'November',
      December: 'December',
      janvier: 'January',
      février: 'February',
      mars: 'March',
      avril: 'April',
      mai: 'May',
      juin: 'June',
      juillet: 'July',
      août: 'August',
      septembre: 'September',
      octobre: 'October',
      novembre: 'November',
      décembre: 'December',
    },
    labels: {
      between: 'Between',
      and: 'and'
    },
    units: {
      kg: 'kg',
      pieces: 'pieces',
      days: 'days',
      weeks: 'weeks'
    }
  },
  pt: {
    tabs: {
      locations: 'Locais',
      seeds: 'Sementes',
      cultures: 'Culturas',
      harvests: 'Colheitas',
      bilan: 'Relatório'
    },
    buttons: {
      theme: 'Alternar tema',
      add: 'Adicionar',
      add_location: '+',
      edit_location: 'Editar um local',
      add_seed: '+',
      edit_seed: 'Editar uma semente',
      save: 'Salvar',
      delete: 'Excluir',
      add_culture: '+',
      edit_culture: 'Editar uma cultura',
      add_harvest: '+',
      edit_harvest: 'Editar uma colheita',
      generate_report: 'Gerar Relatório'
    },
    fields: {
      in: 'em',
      surface: 'Superfície (m²)',
      caissette: 'Bandeja',
      pot: 'Vaso',
      parcelle: 'Parcela',
      cyclique: 'Cíclico',
      location: 'Local',
      statique: 'Estático',
      name: 'Nome',
      address: 'Endereço',
      type: 'Tipo',
      surface: 'Superfície (m²)',
      image: 'Imagem',
      remarks: 'Observações',
      common_name: 'Nome comum',
      category: 'Categoria',
      species: 'Espécie',
      scientific_name: 'Nome científico',
      sowing_months: 'Meses de semeadura',
      harvest_months: 'Meses de colheita',
      germination_time: 'Tempo de germinação (dias)',
      harvest_time: 'Tempo para colheita (semanas)',
      seed_type: 'Tipo de planta',
      dans: 'em',
      culture: 'Cultura',
    },
    hints :{
sowing_dates: 'Data de semeadura',
    },
    categories: {
      aromatiques: 'Aromáticas',
      légumes: 'Legumes',
      fleurs: 'Flores',
      fruitières: 'Frutas',
      médicinales: 'Medicinais',
      tubercules: 'Tubérculos',
      sauvages: 'Selvagens',
      plantes_aromatiques: 'Plantas aromáticas',
      plantes_fruitières: 'Plantas frutíferas',
      plantes_médicinales: 'Plantas medicinais',
      plantes_sauvages: 'Plantas selvagens',
    },
    placeholders: {
      select_seed_harvest_time: 'Selecionar tempo de colheita',
      select_seed_germination_time: 'Selecionar tempo de germinação (dias)',
      select_sowing_month: 'Selecionar meses de semeadura',
      select_seed_harvest_months: 'Selecionar meses de colheita',
      select_harvest_count: 'Numero de colheita',
      select_harvest_month: 'Mês de colheita',
      surface: 'Superfície (m²)',
      common_name: 'Selecionar um nome comum',
      scientific_name: 'Selecionar um nome científico',
      select_sowing_month: 'Selecionar meses de semeadura',
      select_seed_harvest_months: 'Selecionar meses de colheita',
      select_seed_germination_time: 'Selecionar tempo de germinação (dias)',
      search: 'Pesquisar',
      select: 'Selecionar',
      select_plant: 'Selecionar uma planta',
      select_category: 'Selecionar uma categoria',
      select_species: 'Selecionar uma espécie',
      select_type: 'Todos os tipos',
      select_address: 'Todos os endereços',
      select_months: 'Meses selecionados',
      name: 'Nome',
      quantity: 'Quantidade',
      address: 'Endereço',
      first_harvest_time: 'Tempo até a primeira colheita (semanas)',
      harvest_periodicity: 'Periodicidade da colheita (semanas)',
      remarks: 'Observações',
      select_location: 'Selecionar um local',
      select_seed: 'Selecionar uma semente',
      select_culture: 'Selecionar uma cultura',
      select_harvest: 'Selecionar uma colheita',
      filter_plant_address : 'Filtrar por endereço',
      filter_category: 'Filtrar por categoria',
      filter_harvest_month: 'Filtrar por mês de colheita',
      filter_plant_type: 'Filtrar por tipo de planta',
      filter_seed_type: 'Filtrar por tipo de semente',
      filter_seed_category: 'Filtrar por categoria de semente',
      filter_seed_species: 'Filtrar por espécie de semente',
      select_location_type: 'Selecionar um tipo de local',
      select_seed_type: 'Selecionar um tipo de semente',
      select_seed_category: 'Selecionar uma categoria de semente',
      select_seed_species : 'Selecionar uma espécie de semente',
      select_seed_common_name: 'Selecionar um nome comum de semente',
      select_range: 'Selecionar um intervalo',
      select_seed_scientific_name: 'Selecionar um nome científico de semente',
      select_seed_sowing_months: 'Selecionar meses de semeadura',
      parcelle: 'Canteiro',
      pot: 'Vaso',
      caissette: 'Covettes',
      surface: 'Superfície',
      location_image: 'Imagem do local'
    },
    help: {
      locations: 'Adicione e gerencie seus locais de cultivo (parcelas, vasos, bandejas).',
      seeds: 'Gerencie seu estoque de sementes e plantas.',
      cultures: 'Adicione e gerencie suas culturas.',
      harvests: 'Adicione e gerencie suas colheitas.',
      bilan: 'Gere relatórios sobre suas colheitas e culturas.',
    },
    errors: {
      required: 'Por favor, preencha todos os campos obrigatórios.',
      invalid_number: 'Por favor, insira um número válido.'
    },
    warnings: {
      delete_seed: 'Culturas e colheitas dependentes desta planta ficarão inválidas. Deseja excluir esta semente?'
    },
// Dans translations.pt, après warnings: { ... }
errors: {
  location_in_use: 'Este local é usado em uma ou mais culturas.',
  delete_failed: 'Falha ao excluir o local.',
  invalid_id: 'Identificador de local inválido.',
  not_found: 'Local não encontrado.'
},
warnings: {
  delete_location: 'Deseja realmente excluir este local?',
  force_delete_location: 'Este local está vinculado a uma ou mais culturas. Excluí-lo pode afetar as culturas e colheitas associadas. Deseja forçar a exclusão?'
}
    ,
    months: {
      January: 'Janeiro',
      February: 'Fevereiro',
      March: 'Março',
      April: 'Abril',
      May: 'Maio',
      June: 'Junho',
      July: 'Julho',
      August: 'Agosto',
      September: 'Setembro',
      October: 'Outubro',
      November: 'Novembro',
      December: 'Dezembro',
      janvier: 'Janeiro',
      février: 'Fevereiro',
      mars: 'Março',
      avril: 'Abril',
      mai: 'Maio',
      juin: 'Junho',
      juillet: 'Julho',
      août: 'Agosto',
      septembre: 'Setembro',
      octobre: 'Outubro',
      novembre: 'Novembro',
      décembre: 'Dezembro'
    },
    labels: {
      between: 'Entre',
      and: 'e'
    },
    units: {
      kg: 'kg',
      pieces: 'peças',
      days: 'dias',
      weeks: 'semanas'
    } 
  },

report: {
  title: 'Analyse de maraîchage',
  harvest: 'Récolte',
  plant_data: 'Données de la plante',
  culture_data: 'Données de la culture',
  harvest_data: 'Données de la récolte',
  analysis: 'Analyse',
  quantity_difference: 'Écart de quantité',
  delay_difference: 'Écart de délai',
  excess: 'excédent',
  deficit: 'déficit',
  delay: 'retard',
  advance: 'avance',
  no_seed_data: 'Aucune donnée de plante disponible',
  no_culture_data: 'Aucune donnée de culture disponible',
  no_harvests: 'Aucune récolte disponible',
  no_data: 'Aucune donnée disponible',
  na: 'N/A'
},
units: {
  kg: 'kg',
  days: 'jours',
  weeks: 'semaines',
  units: 'unités'
},
errors: {
  generate_report_failed: 'Échec de la génération du rapport'
}
};



// Variable pour stocker la langue actuelle
let currentLanguage = 'fr';

// Fonction pour récupérer une traduction
// Paramètres : key (clé de traduction, ex. 'tabs.locations')
// Retour : texte traduit
function getTranslation(key) {
  const keys = key.split('.');
  let result = translations[currentLanguage];
  for (const k of keys) {
    result = result[k];
    if (!result) return key; // Retourne la clé si non trouvée
  }
  return result;
}

// Fonction pour appliquer les traductions à la page
// Paramètres : aucun
// Retour : aucun
function applyTranslations() {
  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.getAttribute('data-i18n');
    element.textContent = getTranslation(key);
  });
  document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
    const key = element.getAttribute('data-i18n-placeholder');
    element.placeholder = getTranslation(key);
  });
}

// Fonction pour définir la langue
// Paramètres : lang (code de langue, ex. 'fr')
// Retour : aucun
function setLanguage(lang) {
  if (translations[lang]) {
    currentLanguage = lang;
    applyTranslations();
    document.dispatchEvent(new Event('languageChanged'));
  }
}

// Initialisation des traductions au chargement
document.addEventListener('DOMContentLoaded', () => {
  applyTranslations();
});

